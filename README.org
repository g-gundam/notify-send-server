#+title: notify-send-server
#+startup: fold indent
#+filetags: :github:project:

- Have you ever wanted to send a notification from a remote server to your local machine?
- If so, this [[https://babashka.org/][babashka]] script may be for you.

* Usage

** Run the server
#+begin_src bash
bb server
#+end_src

- =bb server= lists on `/tmp/notify-send.sock` for [[https://github.com/edn-format/edn][EDN]] expressions and passes them to the notify function in `notify.clj`.

** Send a request to the server
#+begin_src bash
# Send a message as an EDN expression
echo '["hello"]' | bb client
# Send a custom title and message
echo '["Custom Title" "Body of Message"]' | bb client
# Pass options to notify-send
echo '[{"-a" "Emacs *perl-live*" "--urgency" "critical"} "Crash" ' \
     \"$(date --utc --iso-8601=seconds)\" "]" | bb client
#+end_src

- =bb client= reads one [[https://github.com/edn-format/edn][EDN]] expression and sends it to the server.

** Forward unix domain socket to remote server
#+begin_src bash
env NSS_REMOTE=anon@remoteserver.og bb ssh
#+end_src

Now this remote server can send notifications to the local server that's running the notify-send-server.  They make requests the exact same way, because the remote server will have its own unix domain socket which happens to forward to the 
